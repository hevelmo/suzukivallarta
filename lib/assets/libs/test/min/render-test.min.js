function getContents(e,t){return fs.readFileSync(path.join(_files,e+"."+t),"utf8")}function getView(testName){var view=getContents(testName,"js");if(!view)throw new Error('Cannot find view for test "'+testName+'"');return eval(view)}function getPartial(e){try{return getContents(e,"partial")}catch(t){}}function getTest(e){var t={};return t.view=getView(e),t.template=getContents(e,"mustache"),t.partial=getPartial(e),t.expect=getContents(e,"txt"),t}require("./helper");var fs=require("fs"),path=require("path"),_files=path.join(__dirname,"_files"),testToRun=process.env.TEST,testNames;testNames=testToRun?[testToRun]:fs.readdirSync(_files).filter(function(e){return/\.js$/.test(e)}).map(function(e){return path.basename(e).replace(/\.js$/,"")}),describe("Mustache.render",function(){beforeEach(function(){Mustache.clearCache()}),testNames.forEach(function(e){var t=getTest(e);it("knows how to render "+e,function(){var e;e=t.partial?Mustache.render(t.template,t.view,{partial:t.partial}):Mustache.render(t.template,t.view),assert.equal(e,t.expect)})})});