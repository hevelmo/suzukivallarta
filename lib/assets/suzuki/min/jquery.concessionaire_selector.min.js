!function(e){e.fn.concessionaire_selector=function(s){function a(){e.ajax({url:t.service_url,success:function(s){if("ok"==s.status){var a,c,n,o,i=s.data.concessionaires,l=s.data.states,r="";r+='<option value="-1">'+t.states_text+"</option>";for(n in l)o=l[n],r+='<option value="'+o.key+'">'+o.name+"</option>";e(t.target).html('<select style="width: 240px;" class="'+t.states_class+'">'+r+'</select><select style="width: 240px;" class="'+t.concessionaires_class+'" disabled="disabled"><option value="-1">'+t.concessionaires_text+"</option></select>");try{e("select."+t.states_class).chosen(),e("select."+t.concessionaires_class).hide()}catch(u){}e(t.target).children("."+t.states_class).on("change",function(s){var n=e(this).val();if(-1==n)return s.preventDefault(),!1;r='<option value="-1">'+t.concessionaires_text+"</option>";for(a in i)c=i[a],n==c.state&&(r+='<option value="'+c.key+'">'+c.name+"</option>");var o=e(t.target).children("."+t.concessionaires_class);o.prop({disabled:!1}).html(r),o.chosenDestroy(),o.chosen(),o.on("change",function(){var e=o.val();if(t.id=e,t.name=o.children("option:selected").text(),t.url="/concesionarias/suzuki-"+e,null==t.callback)""!=t.ga_label&&(ga("send","event","Promociones",t.ga_label,t.name),setTimeout(function(){document.location.href=t.url},300));else{var s={callback:t.callback,id:t.id,name:t.name,url:t.url};s.callback()}})})}},dataType:"json",cache:t.cache})}var t={cache:!0,callback:null,concessionaires_class:"concessionaire_select",concessionaires_text:"[ Elige tu concesionaria ]",ga_label:"",id:"",name:"",preselected:-1,states_class:"state_select",states_text:"[ Elige tu estado ]",target:this,service_url:"/services/concessionaires/combo",url:""};t=e.extend(t,s),a()}}(jQuery);