!function(e){e.fn.concessionaire_selector=function(a){function s(){e.ajax({url:t.service_url,success:function(a){if("ok"==a.status){var s,c,n,i,o=a.data.concessionaires,l=a.data.states,r="";r+='<option value="-1">'+t.states_text+"</option>";for(n in l)i=l[n],r+='<option value="'+i.key+'">'+i.name+"</option>";e(t.target).html('<select style="width: 240px;" id="hfu_state_chzn_chzn" class="'+t.states_class+'" data-validation-data="required|name">'+r+'</select><select style="width: 240px;" id="hfu_concessionaire_chzn" name="porra" class="'+t.concessionaires_class+'" data-validation-data="required|name" disabled="disabled"><option value="-1">'+t.concessionaires_text+"</option></select>");try{e("select."+t.states_class).chosen(),e("select."+t.concessionaires_class).hide()}catch(u){}e(t.target).children("."+t.states_class).on("change",function(a){var n=e(this).val();if(-1==n)return a.preventDefault(),!1;r='<option value="-1">'+t.concessionaires_text+"</option>";for(s in o)c=o[s],n==c.state&&(r+='<option value="'+c.key+'">'+c.name+"</option>");var i=e(t.target).children("."+t.concessionaires_class);i.prop({disabled:!1}).html(r),i.chosenDestroy(),i.chosen(),i.on("change",function(){var e=i.val();if(t.id=e,t.name=i.children("option:selected").text(),t.url="/concesionarias/suzuki-"+e,null==t.callback)""!=t.ga_label&&(ga("send","event","Promociones",t.ga_label,t.name),setTimeout(function(){document.location.href=t.url},300));else{var a={callback:t.callback,id:t.id,name:t.name,url:t.url};a.callback()}})})}},dataType:"json",cache:t.cache})}var t={cache:!0,callback:null,concessionaires_class:"concessionaire_select",concessionaires_text:"[ Elige tu concesionaria ]",ga_label:"",id:"",name:"",preselected:-1,states_class:"state_select",states_text:"[ Elige tu estado ]",target:this,service_url:"/services/concessionaires/combo",url:""};t=e.extend(t,a),s()}}(jQuery);